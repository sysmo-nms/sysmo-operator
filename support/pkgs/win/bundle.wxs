<?xml version='1.0' encoding='windows-1252'?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
    xmlns:bal="http://schemas.microsoft.com/wix/BalExtension"
    xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
    <Bundle
        Name="Sysmo Operator UI - 1.0"
        Version="1.0"
        Manufacturer="Sysmo.io"
        UpgradeCode="aaaaaaaa-7349-453F-94F6-BCB5110BA4FD"
        Copyright="Copyright (c) sebastien.serre@sysmo.io. All rights reserved."
        IconSourceFile="support\pkgs\win\bundle.ico"
        DisableModify="no"
        DisableRemove="no"
        HelpUrl="www.sysmo.io/help.html"
        UpdateUrl="www.sysmo.io/updates.html"
        AboutUrl="www.sysmo.io/about.html">
        <Log Disable="no" Extension=".log" PathVariable="[TempFolder]" Prefix="sysmoSetup" />
        <Update Location="www.sysmo.io/sysmo-core-x86_updates/latestBundel.exe" />
        <BootstrapperApplicationRef
            Id="WixStandardBootstrapperApplication.RtfLicense">
            <bal:WixStandardBootstrapperApplication
                LicenseFile="LICENSE.txt"
                LogoFile="support\pkgs\win\bundle-logo.png"
                ShowVersion="yes"
                SuppressOptionsUI="yes"
                SuppressRepair="no"
                LaunchHidden="no"
                SuppressDowngradeFailure="no"
                LaunchTarget="[ProgramFilesFolder]Sysmo NMS\Operator\sysmo.exe"
                />
        </BootstrapperApplicationRef>

        <util:RegistrySearch
            Root="HKLM"
            Key="SOFTWARE\JavaSoft\Java Runtime Environment"
            Value="CurrentVersion"
            Variable="SEARCH_CurrentJavaVersion"
            Win64="no" />

        <util:RegistrySearch
            Root="HKLM"
            Key="SOFTWARE\Microsoft\VisualStudio\14.0\VC\VCredist\x86"
            Value="Installed"
            Variable="SEARCH_VCRedist2015Installed"
            Win64="no" />

        <Chain
            DisableRollback="yes"
            DisableSystemRestore="yes"
            ParallelCache="yes" >

<!-- vcredist 2010 for erlang -->
<ExePackage
    Id="vcredist2015"
    Cache="always"
    Permanent="yes"
    InstallCommand="/q /norestart"
    RepairCommand="/q /repair /norestart"
    DetectCondition="SEARCH_VCRedist2015Installed = 1"
    PerMachine="yes"
    Vital="yes"
    SuppressSignatureVerification="yes"
    SourceFile="build/vcredist_x86_2010.exe" />

<ExePackage
    Id="java8"
    Cache="always"
    Permanent="yes"
    InstallCommand="/s"
    RepairCommand="/s"
    DetectCondition="SEARCH_CurrentJavaVersion = v1.8"
    PerMachine="yes"
    Vital="yes"
    SuppressSignatureVerification="yes"
    SourceFile="build/jre-8u40-windows-i586.exe" />

<RollbackBoundary />

<MsiPackage
    Id="MainPackage"
    SourceFile="build/operator.msi"
    Vital="yes"
    DisplayInternalUI="yes" />
</Chain>
</Bundle>
</Wix>

